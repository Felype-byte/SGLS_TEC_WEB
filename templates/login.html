<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Login - SGLS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}" />
</head>
<body>
  <div class="login-container">
    <img src="{{ url_for('static', filename='img/logo_ufc.png') }}" alt="Logo UFC" />
    <h5>SGLS - Sistema de Gerenciamento de Laboratórios</h5>
    <p>Campus Mucambinho - UFC Sobral</p>

    <div class="tabs">
      <div class="tab active" onclick="showTab('aluno', this)">
        <i class="bi bi-person"></i> Aluno
      </div>
      <div class="tab" onclick="showTab('professor', this)">
        <i class="bi bi-mortarboard"></i> Professor
      </div>
      <div class="tab" onclick="showTab('tecnico', this)">
        <i class="bi bi-tools"></i> Técnico
      </div>
    </div>

    <!-- Aluno -->
    <div id="aluno" class="form-content active">
      <form action="{{ url_for('login_aluno.autenticar_aluno') }}" method="POST">
        <label>Matrícula</label>
        <input type="text" name="matricula" class="form-control" required />

        <label>Senha</label>
        <div class="input-group">
          <input type="password" name="senha" id="senhaAluno" class="form-control" required />
          <span class="input-group-text" onclick="toggleSenha('senhaAluno', this)">
            <i class="bi bi-eye"></i>
          </span>
        </div>

        <button class="btn btn-primary w-100 mt-2" type="submit">Entrar</button>
      </form>
      {% if erro_aluno %}
        <div class="alert alert-danger mt-2" id="alertaAluno">{{ erro_aluno }}</div>
      {% endif %}
      <p class="mt-2 text-center">
        <a href="{{ url_for('cadastro_aluno.tela_cadastro_aluno') }}" class="text-primary">Cadastre-se aqui</a>
      </p>
    </div>

    <!-- Professor -->
    <div id="professor" class="form-content">
      <form action="{{ url_for('login_professor.autenticar_professor') }}" method="POST">
        <label>SIAPE</label>
        <input type="text" name="siape" class="form-control" required />

        <label>Senha</label>
        <div class="input-group">
          <input type="password" name="senha" id="senhaProfessor" class="form-control" required />
          <span class="input-group-text" onclick="toggleSenha('senhaProfessor', this)">
            <i class="bi bi-eye"></i>
          </span>
        </div>

        <button class="btn btn-primary w-100 mt-2" type="submit">Entrar</button>
      </form>
      {% if erro_professor %}
        <div class="alert alert-danger mt-2" id="alertaProfessor">{{ erro_professor }}</div>
      {% endif %}
      <p class="mt-2 text-center">
        <a href="{{url_for('cadastro_professor.tela_cadastro_professor') }}" class="text-primary">Cadastre-se aqui</a>
      </p>
    </div>

    <!-- Técnico -->
    <div id="tecnico" class="form-content">
      <form action="{{ url_for('login_tecnico.autenticar_tecnico') }}" method="POST">
        <label>SIAPE</label>
        <input type="text" name="siape" class="form-control" required />

        <label>Senha</label>
        <div class="input-group">
          <input type="password" name="senha" id="senhaTecnico" class="form-control" required />
          <span class="input-group-text" onclick="toggleSenha('senhaTecnico', this)">
            <i class="bi bi-eye"></i>
          </span>
        </div>

        <button class="btn btn-primary w-100 mt-2" type="submit">Entrar</button>
      </form>
      {% if erro_tecnico %}
        <div class="alert alert-danger mt-2" id="alertaTecnico">{{ erro_tecnico }}</div>
      {% endif %}
      <p class="mt-2 text-center">
        <a href="{{ url_for('cadastro_tecnico.tela_cadastro_tecnico') }}" class="text-primary">Cadastre-se aqui</a>
      </p>
    </div>
  </div>

  <footer class="footer text-center mt-4">
    SGHL | © 2025 - Divisão de TI - UFC Sobral
  </footer>

  <script>
    function showTab(tabId, element) {
      document.querySelectorAll(".form-content").forEach((el) => el.classList.remove("active"));
      document.querySelectorAll(".tab").forEach((el) => el.classList.remove("active"));
      document.getElementById(tabId).classList.add("active");
      element.classList.add("active");
    }

    function toggleSenha(idInput, span) {
      const input = document.getElementById(idInput);
      const icon = span.querySelector("i");
      if (input.type === "password") {
        input.type = "text";
        icon.classList.replace("bi-eye", "bi-eye-slash");
      } else {
        input.type = "password";
        icon.classList.replace("bi-eye-slash", "bi-eye");
      }
    }

    setTimeout(() => {
      document.querySelectorAll(".alert").forEach((el) => el.style.display = "none");
    }, 4000);
  </script>
</body>
</html>
