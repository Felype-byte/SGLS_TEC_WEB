{% extends 'base_dashboard_aluno.html' %}

{% block title %}Painel do Aluno â€“ SGHL{% endblock %}

{% block content %}
<div class="painel-aluno-main">
  <div class="painel-aluno-card">
    <h4 class="painel-aluno-titulo mb-4">
      <i class="bi bi-journal-text text-primary"></i> Painel do Aluno
    </h4>

    <form method="POST" action="{{ url_for('aluno.agendamento_aluno') }}" class="form-agendamento">
      <!-- 1. LaboratÃ³rio e Professor -->
      <div class="painel-section-row mb-4">
        <div class="painel-section">
          <label for="sala_id">1. LaboratÃ³rio</label>
          <select name="sala_id" id="sala_id" class="form-control painel-input painel-select" required>
            <option selected disabled value="">Selecione...</option>
            {% for sala in salas %}
              <option value="{{ sala.id_sala }}">{{ sala.nome_sala }} ({{ sala.bloco }} â€“ Sala {{ sala.numero_sala }})</option>
            {% endfor %}
          </select>
        </div>
        <div class="painel-section">
          <label for="professor_id">2. Professor ResponsÃ¡vel</label>
          <select name="professor_id" id="professor_id" class="form-control painel-input painel-select" required>
            <option selected disabled value="">Selecione...</option>
            {% for prof in professores %}
              <option value="{{ prof.id_professor }}">Prof. {{ prof.nome_completo }} â€“ {{ prof.departamento }}</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <!-- 2. Data e Justificativa -->
      <div class="painel-section-row mb-4">
        <div class="painel-section">
          <label for="data">3. Data</label>
          <input type="date" name="data" id="data" class="form-control painel-input" required>
        </div>
        <div class="painel-section">
          <label for="justificativa">4. Justificativa</label>
          <textarea name="justificativa" id="justificativa" rows="2" class="form-control painel-input" placeholder="Descreva o motivo..."></textarea>
        </div>
      </div>

      <!-- Ver horÃ¡rios -->
      <div class="painel-actionbar text-right mb-3">
        <button type="button" class="btn btn-outline-primary btn-ver-horarios" onclick="carregarHorarios()">
          <i class="bi bi-search"></i> Ver HorÃ¡rios
        </button>
      </div>

      <!-- 3. HorÃ¡rios disponÃ­veis -->
      <div class="painel-section-col mb-4">
        <h6 class="mb-2 font-weight-bold">5. HorÃ¡rios disponÃ­veis</h6>
        <div id="grade-horarios" class="painel-horarios-list row">
          <p class="text-muted ml-3">Selecione sala e data para ver horÃ¡rios.</p>
        </div>
      </div>

      <!-- Legenda -->
      <div class="painel-legenda mb-4">
        <span>Legenda:</span>
        <span class="badge badge-light">â¬œ DisponÃ­vel</span>
        <span class="badge badge-info text-white">ðŸŸ¦ Selecionado</span>
        <span class="badge badge-success">ðŸŸ© Confirmado</span>
        <span class="badge badge-warning text-dark">ðŸŸ¨ Em processo</span>
        <span class="badge badge-secondary">ðŸ”˜ Outros</span>
      </div>

      <!-- BotÃ£o final -->
      <div class="painel-actionbar text-right">
        <button type="submit" class="btn btn-primary btn-solicitar">
          <i class="bi bi-send-fill"></i> Solicitar Agendamento
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block extra_scripts %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/aluno_dashboard.css') }}">
  <script src="{{ url_for('static', filename='js/aluno_dashboard.js') }}"></script>
{% endblock %}
